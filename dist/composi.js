!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.composi={})}(this,function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(function(){function e(e){this.value=e}function t(t){var n,o;function i(n,o){try{var l=t[n](o),u=l.value;u instanceof e?Promise.resolve(u.value).then(function(e){i("next",e)},function(e){i("throw",e)}):r(l.done?"return":"normal",l.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?i(n.key,n.arg):o=null}this._invoke=function(e,t){return new Promise(function(r,l){var u={key:e,arg:t,resolve:r,reject:l,next:null};o?o=o.next=u:(n=o=u,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i="http://www.w3.org/1999/xlink",r="http://www.w3.org/2000/svg";function l(e,t){var n={};for(var o in e)n[o]=e[o];for(var i in t)n[i]=t[i];return n}var u=window&&window.requestAnimationFrame||window&&window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};function s(e){return!Array.isArray(e)&&"object"===(void 0===e?"undefined":t(e))}function a(e){return e.currentTarget.events[e.type](e)}var c=function(e){return e?e.key:null};function p(e,n,o,r,u){if("key"!==n&&"onmount"!==n&&"onupdate"!==n&&"onunmount"!==n&&"onComponentDidMount"!==n&&"onComponentDidUpdate"!==n&&"onComponentWillUnmount"!==n)if("style"!==n||"object"!==(void 0===o?"undefined":t(o))||Array.isArray(o))"o"===(n=n.toLowerCase())[0]&&"n"===n[1]&&(e.events||(e.events={}),e.events[n=n.slice(2)]=o,null==o?e.removeEventListener(n,a):null==r&&e.addEventListener(n,a)),"classname"===n&&(n="class"),"dangerouslysetinnerhtml"===n&&(e.innerHTML=o),n in e&&"list"!==n&&!u?e[n]="no"==o?"":o:null!=o&&"null"!==o&&"false"!==o&&"no"!==o&&"off"!==o&&("xlink-href"===n?(e.setAttributeNS(i,"href",o),e.setAttribute("href",o)):("true"===o&&(o=""),"dangerouslysetinnerhtml"!==n&&e.setAttribute(n,o))),null!=o&&"null"!==o&&"undefined"!==o&&"false"!==o&&"no"!==o&&"off"!==o||e.removeAttribute(n);else for(var s in l(r,o)){var c=null==o||null==o[s]?"":o[s];"-"===s[0]?e[n].setProperty(s,c):e[n][s]=c}}var d=function(e,t,n){var o=function(){e.removeChild(t)},i=n.props&&n.props.onunmount||n.props&&n.props.onComponentWillUnmount;null!=i?i(t,o):o()};function f(e,t,n,o,i){if(o!==n){if(null==n||n.type!==o.type){var u=function e(t,n){var o=void 0;"number"==typeof t&&(t=t.toString()),o="string"==typeof t?document.createTextNode(t):(n=n||"svg"===t.type)?document.createElementNS(r,t.type):document.createElement(t.type);var i=t.props;if(i){for(var l=0;l<t.children.length;l++)o.appendChild(e(t.children[l],n));for(var u in i)p(o,u,i[u],null,n)}return o}(o,i);e&&(e.insertBefore(u,t),null!=n&&d(e,t,n)),t=u}else if(null==n.type)t.nodeValue=o;else{!function(e,t,n,o){for(var i in l(t,n))n[i]!==("value"===i||"checked"===i?e[i]:t[i])&&p(e,i,n[i],t[i],o);e.mounted&&n&&n.onComponentDidUpdate&&n.onComponentDidUpdate.call(n.onComponentDidUpdate,t,n,e),e.mounted&&n&&n.onupdate&&n.onupdate.call(n.onupdate,t,n,e)}(t,n.props,o.props,i=i||"svg"===o.type);for(var s={},a={},h=[],m=n.children,v=o.children,y=0;y<m.length;y++){h[y]=t.childNodes[y];var g=c(m[y]);null!=g&&(s[g]=[h[y],m[y]])}for(var b=0,w=0;w<v.length;){var k=c(m[b]),S=c(v[w]);if(a[k])b++;else if(null==S||S!==c(m[b+1]))if(null==S)null==k&&(f(t,h[b],m[b],v[w],i),w++),b++;else{var U=s[S]||[];k===S?(f(t,U[0],U[1],v[w],i),b++):U[0]?f(t,t.insertBefore(U[0],h[b]),U[1],v[w],i):f(t,h[b],null,v[w],i),a[S]=v[w],w++}else null==k&&d(t,h[b],m[b]),b++}for(;b<m.length;)null==c(m[b])&&d(t,h[b],m[b]),b++;for(var C in s)a[C]||d(t,s[C][0],s[C][1])}return t}}function h(e,t){return t?f(t.parentNode,t,t&&t.vnode,e):t=f(null,null,null,e),t.vnode=e,t}var m=(new Date).getTime(),v=function(){function e(t){n(this,e),t||(t={}),this.props=t,this.selector=t.container||"body",t.render&&(this.render=t.render),t.state&&(this.state=t.state),this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element=null,t.componentWillMount&&(this.componentWillMount=t.componentWillMount),t.componentDidMount&&(this.componentDidMount=t.componentDidMount),t.componentWillUpdate&&(this.componentWillUpdate=t.componentWillUpdate),t.componentDidUpdate&&(this.componentDidUpdate=t.componentDidUpdate),t.componentWillUnmount&&(this.componentWillUnmount=t.componentWillUnmount)}return o(e,[{key:"componentWillMount",value:function(e){e&&"function"==typeof e&&e.call(e,this)}},{key:"componentDidMount",value:function(e){e&&"function"==typeof e&&e.call(e,this)}},{key:"componentWillUpdate",value:function(e){e&&"function"==typeof e&&e.call(e,this)}},{key:"componentDidUpdate",value:function(e){e&&"function"==typeof e&&e.call(e,this)}},{key:"componentWillUnmount",value:function(e){e&&"function"==typeof e&&e.call(e,this)}},{key:"render",value:function(e){return e}},{key:"setState",value:function(e){if("function"==typeof e){var t=e.call(this,this.state);t&&(this.state=t)}else if(s(this.state)&&s(e)){var n=this.state;this.state=l(n,e)}else this.state=e}},{key:"update",value:function(e){if(this.render&&(this.componentShouldUpdate||!this.mounted)){var t=this.state;!0!==e&&e&&(t=e),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var n=this.render(t),o=void 0;n&&n.props&&n.props.id&&this.container&&(o=this.container&&this.container.querySelector("#"+n.props.id)),o&&!this.mounted&&o.parentNode.removeChild(o);var i=this.element&&this.element.vnode;if(r=i,l=t,!(u=this)||JSON.stringify(r)!==JSON.stringify(u.render(l))){var r,l,u;if(this.element=h(this.render(t),this.element),!this.mounted)return this.componentWillMount&&this.componentWillMount(),this.container&&1===this.container.nodeType||console.error("The container for a class component is not a valid DOM node. Check the selector provided for the class to make sure it is a valid CSS selector and that the container exists in the DOM. You might be targeting a nonexistent node."),this.container.appendChild(this.element),this.mounted=!0,void(this.componentDidMount&&this.componentDidMount());this.componentWillUpdate&&this.componentWillUpdate(),this.componentDidUpdate&&this.componentDidUpdate()}}}},{key:"unmount",value:function(){if(this.element){this.componentWillUnmount&&this.componentWillUnmount(),this.container.removeChild(this.element),this.container=null;for(var e in this)delete this[e];delete this.state,this.update=null,this.unmount=null}}},{key:"state",get:function(){return this[m]},set:function(e){var t=this;this[m]=e,u(function(){return t.update()})}}]),e}();e.h=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var r=[],l=[],u=o.length,s=(t=t||{}).key||null;for(delete t.key;u-- >0;)r.push(o[u]);for(;r.length;){var a=r.pop();if(a&&a.pop)for(u=a.length;u--;)r.push(a[u]);else null!=a&&!0!==a&&!1!==a&&l.push(a)}return o=l,"function"==typeof e?e(t||{},l):{type:e,props:t,children:o,key:s}},e.mount=function(e,t,o){if("string"==typeof t&&(t=document.querySelector(t)),t||(t=document.body),Array.isArray(e))throw new function e(){n(this,e),this.message="Cannot insert Fragment tag directly into DOM.",this.toString=function(){return this.message}};var i=h(e);return e.props&&e.props.onComponentDidMount&&e.props.onComponentDidMount.call(e.props.onComponentDidMount,i),i.mounted=!0,o?("string"==typeof o&&(o=document.querySelector(o)),o.nextElementSibling?(o.parentNode.insertBefore(i,o.nextElementSibling),o.parentNode.removeChild(o),i):(o.parentNode.appendChild(i),o.parentNode.removeChild(o),i)):t.appendChild(i)},e.render=function(e,t){return h(e,t)},e.Component=v,e.Fragment=function(e,t){return t},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=composi.js.map
