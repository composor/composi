!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.composi={})}(this,function(e){"use strict";var t=function(e){return e?e.key:null};function n(e,t){var n={};for(var o in e)n[o]=e[o];for(var i in t)n[i]=t[i];return n}function o(e,t,o,i,r){if("key"!==t&&"onComponentDidMount"!==t&&"onComponentDidUpdate"!==t&&"onComponentWillUnmount"!==t)if("style"===t&&"string"!=typeof o)for(var u in n(i,o)){var l=null==o||null==o[u]?"":o[u];"-"===u[0]?e[t].setProperty(u,l):e[t][u]=l}else"className"===t&&(t="class"),"dangerouslySetInnerHTML"===t&&(e.innerHTML=o),"o"==t[0]&&"n"==t[1]&&(t=t.toLowerCase()),t in e&&"list"!==t&&!r?e[t]="no"==o?"":o:null!=o&&"null"!==o&&"false"!==o&&"no"!==o&&"off"!==o&&("xlink-href"===t?(e.setAttributeNS("http://www.w3.org/1999/xlink","href",o),e.setAttribute("href",o)):("true"===o&&(o=""),e.setAttribute(t,o))),null!=o&&"null"!==o&&"undefined"!==o&&"false"!==o&&"no"!==o&&"off"!==o||e.removeAttribute(t)}var i=function(e,t,n){e.removeChild(function e(t,n){if(n.props)for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);return t}(t,n)),n&&n.props&&n.props.onComponentDidUnmount&&n.props.onComponentDidUnmount.call(n.props.onComponentDidUnmount,e)};function r(e,u,l,s,a){if(s!==l){if(null==l||l.type!==s.type){var c=function e(t,n){var i=void 0;"number"==typeof t&&(t=t.toString()),i="string"==typeof t?document.createTextNode(t):(n=n||"svg"===t.type)?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);var r=t.props;if(r){for(var u=0;u<t.children.length;u++)i.appendChild(e(t.children[u],n));for(var l in r)o(i,l,r[l],null,n)}return i}(s,a);e&&(e.insertBefore(c,u),null!=l&&i(e,u,l)),u=c}else if(null==l.type)u.nodeValue=s;else{!function(e,t,i,r){for(var u in n(t,i))i[u]!==("value"===u||"checked"===u?e[u]:t[u])&&o(e,u,i[u],t[u],r);e.mounted&&i&&i.onComponentDidUpdate&&i.onComponentDidUpdate.call(i.onComponentDidUpdate,t,i,e)}(u,l.props,s.props,a=a||"svg"===s.type);for(var p={},d={},h=[],f=l.children,m=s.children,v=0;v<f.length;v++){h[v]=u.childNodes[v];var y=t(f[v]);null!=y&&(p[y]=[h[v],f[v]])}for(var g=0,k=0;k<m.length;){var w=t(f[g]),b=t(m[k]);if(d[w])g++;else if(null==b||b!==t(f[g+1]))if(null==b)null==w&&(r(u,h[g],f[g],m[k],a),k++),g++;else{var U=p[b]||[];w===b?(r(u,U[0],U[1],m[k],a),g++):U[0]?r(u,u.insertBefore(U[0],h[g]),U[1],m[k],a):r(u,h[g],null,m[k],a),d[b]=m[k],k++}else null==w&&i(u,h[g],f[g]),g++}for(;g<f.length;)null==t(f[g])&&i(u,h[g],f[g]),g++;for(var C in p)d[C]||i(u,p[C][0],p[C][1])}return u}}function u(e,t){return t?r(t.parentNode,t,t&&t.node,e):t=r(null,null,null,e),t.node=e,t}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(function(){function e(e){this.value=e}function t(t){var n,o;function i(n,o){try{var u=t[n](o),l=u.value;l instanceof e?Promise.resolve(l.value).then(function(e){i("next",e)},function(e){i("throw",e)}):r(u.done?"return":"normal",u.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?i(n.key,n.arg):o=null}this._invoke=function(e,t){return new Promise(function(r,u){var l={key:e,arg:t,resolve:r,reject:u,next:null};o?o=o.next=l:(n=o=l,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var c=window&&window.requestAnimationFrame||window&&window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};function p(e){return!Array.isArray(e)&&"object"===(void 0===e?"undefined":l(e))}var d=(new Date).getTime(),h=function(){function e(t){s(this,e),t||(t={}),this.props=t,this.selector=t.container||"body",t.render&&(this.render=t.render),t.state&&(this.state=t.state),this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element,t.componentWillMount&&(this.componentWillMount=t.componentWillMount),t.componentDidMount&&(this.componentDidMount=t.componentDidMount),t.componentWillUpdate&&(this.componentWillUpdate=t.componentWillUpdate),t.componentDidUpdate&&(this.componentDidUpdate=t.componentDidUpdate),t.componentWillUnmount&&(this.componentWillUnmount=t.componentWillUnmount)}return a(e,[{key:"componentWillMount",value:function(e){return e}},{key:"componentDidMount",value:function(e){return e}},{key:"componentWillUpdate",value:function(e){return e}},{key:"componentDidUpdate",value:function(e){return e}},{key:"componentWillUnmount",value:function(e){return e}},{key:"render",value:function(e){return e}},{key:"setState",value:function(e){if("function"==typeof e){var t=e.call(this,this.state);this.state=t}else if(p(this.state)&&p(e)){var o=this.state;this.state=n(o,e)}else this.state=e}},{key:"update",value:function(e){if(this.render&&(this.componentShouldUpdate||!this.mounted)){var t=this.state;!0!==e&&e&&(t=e),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var n=this.render(t),o=void 0;n&&n.props&&n.props.id&&this.container&&(o=this.container&&this.container.querySelector("#"+n.props.id)),o&&!this.mounted&&o.parentNode.removeChild(o);var i=this.element&&this.element.node;if(r=i,l=t,!(s=this)||JSON.stringify(r)!==JSON.stringify(s.render(l))){var r,l,s;if(this.element=u(this.render(t),this.element),!this.mounted)return this.componentWillMount&&this.componentWillMount(this),this.container&&1===this.container.nodeType||console.error("The container for a class component is not a valid DOM node. Check the selector provided for the class to make sure it is a valid CSS selector and that the container exists in the DOM. You might be targeting a nonexistent node."),this.container.appendChild(this.element),this.mounted=!0,void(this.componentDidMount&&this.componentDidMount(this));this.componentWillUpdate&&this.componentWillUpdate(this),this.componentDidUpdate&&this.componentDidUpdate(this)}}}},{key:"unmount",value:function(){var e=this;if(this.element){this.componentWillUnmount&&this.componentWillUnmount(this),["change","click","dblclick","input","keydown","keypress","keyup","mousedown","mouseleave","mouseout","mouseover","mouseup","pointercancel","pointerdown","pointermove","pointerup","select","submit","touchcancel","touchend","touchmove","touchstart"].map(function(t){e.element.removeEventListener(t,e)}),this.container.removeChild(this.element),this.container=void 0;for(var t in this)delete this[t];delete this.state,this.update=void 0,this.unmount=void 0}}},{key:"state",get:function(){return this[d]},set:function(e){var t=this;this[d]=e,c(function(){return t.update()})}}]),e}();e.h=function(e,t){for(var n=[],o=[],i=arguments.length,r=Array(i>2?i-2:0),u=2;u<i;u++)r[u-2]=arguments[u];for(var l=r.length,s=void 0;l-- >0;)n.push(r[l]);for(t&&t.key&&(s=t.key,delete t.key);n.length;){var a=n.pop();if(a&&a.pop)for(l=a.length;l--;)n.push(a[l]);else null!=a&&!0!==a&&!1!==a&&o.push(a)}return"function"==typeof e?e(t||{},o):{type:e,props:t||{},children:o,key:s}},e.mount=function(e,t,n){if((t="string"==typeof t&&document.querySelector(t))||(t=document.body),Array.isArray(e))throw new function e(){s(this,e),this.message="Cannot insert Fragment tag directly into DOM.",this.toString=function(){return this.message}};var o=u(e);return e.props&&e.props.onComponentDidMount&&e.props.onComponentDidMount.call(e.props.onComponentDidMount,o),o.mounted=!0,n?("string"==typeof n&&(n=document.querySelector(n)),n.nextElementSibling?(n.parentNode.insertBefore(o,n.nextElementSibling),n.parentNode.removeChild(n),o):(n.parentNode.appendChild(o),n.parentNode.removeChild(n),o)):t.appendChild(o)},e.render=function(e,t){return u(e,t)},e.Component=h,e.Fragment=function(e,t){return t},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=composi.js.map
