!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.composi={})}(this,function(e){"use strict";var t=function(e){return e&&e.key};function n(e,t){var n={};for(var o in e)n[o]=e[o];for(var i in t)n[i]=t[i];return n}function o(e,t,o,i,r){if("key"!==t&&"onComponentDidMount"!==t&&"onComponentDidUpdate"!==t&&"onComponentWillUnmount"!==t)if("style"===t&&"string"!=typeof o)for(var s in n(i,o)){var u=null==o||null==o[s]?"":o[s];"-"===s[0]?e[t].setProperty(s,u):e[t][s]=u}else"className"===t&&(t="class"),"dangerouslySetInnerHTML"===t&&(e.innerHTML=o),"o"==t[0]&&"n"==t[1]&&(t=t.toLowerCase()),t in e&&"list"!==t&&!r?e[t]="no"==o?"":o:null!=o&&!1!==o&&"no"!==o&&("xlink-href"===t?(e.setAttributeNS("http://www.w3.org/1999/xlink","href",o),e.setAttribute("href",o)):("true"===o&&(o=!0),e.setAttribute(t,o))),null!=o&&!1!==o&&"false"!==o||e.removeAttribute(t)}var i=function(e,t,n){e.removeChild(function e(t,n){if(n.props)for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);return t}(t,n)),n&&n.props&&n.props.onComponentDidUnmount&&n.props.onComponentDidUnmount.call(n.props.onComponentDidUnmount,e)};function r(e,s,u,l,a){if(l!==u){if(null==u||u.type!==l.type){var c=function e(t,n){var i=void 0;i="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.type)?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);var r=t.props;if(r){for(var s=0;s<t.children.length;s++)i.appendChild(e(t.children[s],n));for(var u in r)o(i,u,r[u],null,n)}return i}(l,a);e&&(e.insertBefore(c,s),null!=u&&i(e,s,u)),s=c}else if(null==u.type)s.nodeValue=l;else{!function(e,t,i,r){for(var s in n(t,i))i[s]!==("value"===s||"checked"===s?e[s]:t[s])&&o(e,s,i[s],t[s],r);e.mounted&&i&&i.onComponentDidUpdate&&i.onComponentDidUpdate.call(i.onComponentDidUpdate,t,i,e)}(s,u.props,l.props,a=a||"svg"===l.type);for(var p={},h={},d=[],m=u.children,f=l.children,v=0;v<m.length;v++){d[v]=s.childNodes[v];var y=t(m[v]);null!=y&&(p[y]=[d[v],m[v]])}for(var w=0,g=0;g<f.length;){var b=t(m[w]),k=t(f[g]);if(h[b])w++;else if(null==k||k!==t(m[w+1]))if(null==k)null==b&&(r(s,d[w],m[w],f[g],a),g++),w++;else{var C=p[k]||[];b===k?(r(s,C[0],C[1],f[g],a),w++):C[0]?r(s,s.insertBefore(C[0],d[w]),C[1],f[g],a):r(s,d[w],null,f[g],a),h[k]=f[g],g++}else null==b&&i(s,d[w],m[w]),w++}for(;w<m.length;)null==t(m[w])&&i(s,d[w],m[w]),w++;for(var S in p)h[S]||i(s,p[S][0],p[S][1])}return s}}function s(e,t){return t?r(t.parentNode,t,t&&t.node,e):t=r(null,null,null,e),t.node=e,t}var u=window&&window.requestAnimationFrame||window&&window.webkitRequestAnimationFrame||window&&window.mozRequestAnimationFrame||window&&window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(function(){function e(e){this.value=e}function t(t){var n,o;function i(n,o){try{var s=t[n](o),u=s.value;u instanceof e?Promise.resolve(u.value).then(function(e){i("next",e)},function(e){i("throw",e)}):r(s.done?"return":"normal",s.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?i(n.key,n.arg):o=null}this._invoke=function(e,t){return new Promise(function(r,s){var u={key:e,arg:t,resolve:r,reject:s,next:null};o?o=o.next=u:(n=o=u,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=(new Date).getTime(),h=function(){function e(t){a(this,e),t||(t={}),this.selector=t.container||"body",t.render&&(this.render=t.render),t.state&&(this.state=t.state),this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element,t.componentWillMount&&(this.componentWillMount=t.componentWillMount),t.componentDidMount&&(this.componentDidMount=t.componentDidMount),t.componentWillUpdate&&(this.componentWillUpdate=t.componentWillUpdate),t.componentDidUpdate&&(this.componentDidUpdate=t.componentDidUpdate),t.componentWillUnmount&&(this.componentWillUnmount=t.componentWillUnmount)}return c(e,[{key:"setState",value:function(e,t){if("function"==typeof e){var o=e.call(this,this.state);"function"!=typeof o&&o&&this.setState(o)}else if(Array.isArray(this.state)){var i=this.state;t||0===t?"object"===l(i[t])?this.state=n(i[t],e):(i[t]=e,this.state=i):this.state=i}else if("object"===l(this.state)){var r=this.state;this.state=n(r,e)}else this.state=e}},{key:"update",value:function(e){if(this.render&&(this.componentShouldUpdate||!this.mounted)){var t=this.state;!0!==e&&e&&(t=e),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var n=this.render(t),o=void 0;n&&n.props&&n.props.id&&this.container&&(o=this.container&&this.container.querySelector("#"+n.props.id)),o&&!this.mounted&&o.parentNode.removeChild(o);var i,r,u,l=this.element&&this.element.node;if(this.element=s(this.render(t),this.element),!this.mounted)return this.componentWillMount&&this.componentWillMount(this),this.container&&1===this.container.nodeType||console.error("The container for a class component is not a valid DOM node. Check the selector provided for the class to make sure it is a valid CSS selector and that the container exists in the DOM. You might be targeting a nonexistent node."),this.container.appendChild(this.element),this.mounted=!0,void(this.componentDidMount&&this.componentDidMount(this));i=l,r=t,(u=this)&&JSON.stringify(i)===JSON.stringify(u.render(r))||(this.componentWillUpdate&&this.componentWillUpdate(this),this.componentDidUpdate&&this.componentDidUpdate(this))}}},{key:"unmount",value:function(){var e=this;if(this.element){this.componentWillUnmount&&this.componentWillUnmount(this),["change","click","dblclick","input","keydown","keypress","keyup","mousedown","mouseleave","mouseout","mouseover","mouseup","pointercancel","pointerdown","pointermove","pointerup","select","submit","touchcancel","touchend","touchmove","touchstart"].map(function(t){e.element.removeEventListener(t,e)}),this.container.removeChild(this.element),this.container=void 0;for(var t in this)delete this[t];delete this.state,this.update=void 0,this.unmount=void 0}}},{key:"state",get:function(){return this[p]},set:function(e){var t=this;this[p]=e,u(function(){return t.update()})}}]),e}();e.h=function(e,t){for(var n=[],o=[],i=arguments.length,r=Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];for(var u=r.length,l=void 0;u-- >0;)n.push(r[u]);for(t&&t.key&&(l=t.key,delete t.key);n.length;){var a=n.pop();if(a&&a.pop)for(u=a.length;u--;)n.push(a[u]);else null!=a&&!0!==a&&!1!==a&&o.push(a)}return"function"==typeof e?e(t||{},o):{type:e,props:t||{},children:o,key:l}},e.mount=function(e,t,n){if((t="string"==typeof t&&document.querySelector(t))||(t=document.body),Array.isArray(e))throw new function(){this.message="Cannot insert Fragment tag directly into DOM.",this.toString=function(){return this.message}};var o=s(e);return e.props&&e.props.onComponentDidMount&&e.props.onComponentDidMount.call(e.props.onComponentDidMount,o),o.mounted=!0,n?("string"==typeof n&&(n=document.querySelector(n)),n.nextElementSibling?(n.parentNode.insertBefore(o,n.nextElementSibling),n.parentNode.removeChild(n),o):(n.parentNode.appendChild(o),n.parentNode.removeChild(n),o)):t.appendChild(o)},e.render=function(e,t){return s(e,t)},e.Component=h,e.Fragment=function(e,t){return t},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=composi.js.map
