!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.composi={})}(this,function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=(function(){function t(t){this.value=t}function e(e){var n,o;function i(n,o){try{var l=e[n](o),u=l.value;u instanceof t?Promise.resolve(u.value).then(function(t){i("next",t)},function(t){i("throw",t)}):r(l.done?"return":"normal",l.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?i(n.key,n.arg):o=null}this._invoke=function(t,e){return new Promise(function(r,l){var u={key:t,arg:e,resolve:r,reject:l,next:null};o?o=o.next=u:(n=o=u,i(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="http://www.w3.org/1999/xlink",r="http://www.w3.org/2000/svg";function l(t,e){var n={};for(var o in t)n[o]=t[o];for(var i in e)n[i]=e[i];return n}var u=window&&window.requestAnimationFrame||window&&window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};function s(t){return!Array.isArray(t)&&"object"===(void 0===t?"undefined":e(t))}function a(t){return t.currentTarget.events[t.type](t)}var c=function(t){return t?t.key:null};function p(t,n,o,r,u){if("key"!==n)if("style"!==n||"object"!==(void 0===o?"undefined":e(o))||Array.isArray(o))"o"===(n=n.toLowerCase())[0]&&"n"===n[1]&&(t.events||(t.events={}),t.events[n=n.slice(2)]=o,null==o?t.removeEventListener(n,a):null==r&&t.addEventListener(n,a)),"classname"===n&&(n="class"),"dangerouslysetinnerhtml"===n&&(n="innerHTML"),n in t&&"list"!==n&&!u?t[n]="no"==o?"":o:null!=o&&"no"!==o&&"off"!==o&&("xlink-href"===n?(t.setAttributeNS(i,"href",o),t.setAttribute("href",o)):("true"===o&&(o=""),"dangerouslysetinnerhtml"!==n&&t.setAttribute(n,o))),null!=o&&"no"!==o&&"off"!==o||t.removeAttribute(n);else for(var s in l(r,o)){var c=null==o||null==o[s]?"":o[s];"-"===s[0]?t[n].setProperty(s,c):t[n][s]=c}}var f=function(t,e,n){var o=function(){t.removeChild(e)},i=n.props&&n.props.onunmount||n.props&&n.props.onComponentWillUnmount;null!=i?i(e,o):o()};function d(t,e,n,o,i){if(o!==n){if(null==n||n.type!==o.type){var u=function t(e,n){var o=void 0;"number"==typeof e&&(e=e.toString()),o="string"==typeof e?document.createTextNode(e):(n=n||"svg"===e.type)?document.createElementNS(r,e.type):document.createElement(e.type);var i=e.props;if(i){for(var l=0;l<e.children.length;l++)o.appendChild(t(e.children[l],n));for(var u in i)p(o,u,i[u],null,n)}return o}(o,i);t&&(t.insertBefore(u,e),null!=n&&f(t,e,n)),e=u}else if(null==n.type)e.nodeValue=o;else{!function(t,e,n,o){for(var i in l(e,n))n[i]!==("value"===i||"checked"===i?t[i]:e[i])&&p(t,i,n[i],e[i],o);t.mounted&&n&&n.onComponentDidUpdate&&n.onComponentDidUpdate.call(n.onComponentDidUpdate,e,n,t),t.mounted&&n&&n.onupdate&&n.onupdate.call(n.onupdate,e,n,t)}(e,n.props,o.props,i=i||"svg"===o.type);for(var s={},a={},h=[],m=n.children,v=o.children,y=0;y<m.length;y++){h[y]=e.childNodes[y];var g=c(m[y]);null!=g&&(s[g]=[h[y],m[y]])}for(var w=0,b=0;b<v.length;){var k=c(m[w]),S=c(v[b]);if(a[k])w++;else if(null==S||S!==c(m[w+1]))if(null==S)null==k&&(d(e,h[w],m[w],v[b],i),b++),w++;else{var U=s[S]||[];k===S?(d(e,U[0],U[1],v[b],i),w++):U[0]?d(e,e.insertBefore(U[0],h[w]),U[1],v[b],i):d(e,h[w],null,v[b],i),a[S]=v[b],b++}else null==k&&f(e,h[w],m[w]),w++}for(;w<m.length;)null==c(m[w])&&f(e,h[w],m[w]),w++;for(var D in s)a[D]||f(e,s[D][0],s[D][1])}return e}}function h(t,e){return e?d(e.parentNode,e,e&&e.vnode,t):e=d(null,null,null,t),e.vnode=t,e}var m=(new Date).getTime(),v=function(){function t(e){n(this,t),e||(e={}),this.props=e,this.selector=e.container||"body",e.render&&(this.render=e.render),e.state&&(this.state=e.state),this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element=null,e.componentWillMount&&(this.componentWillMount=e.componentWillMount),e.componentDidMount&&(this.componentDidMount=e.componentDidMount),e.componentWillUpdate&&(this.componentWillUpdate=e.componentWillUpdate),e.componentDidUpdate&&(this.componentDidUpdate=e.componentDidUpdate),e.componentWillUnmount&&(this.componentWillUnmount=e.componentWillUnmount)}return o(t,[{key:"componentWillMount",value:function(t){t&&"function"==typeof t&&t.call(t,this)}},{key:"componentDidMount",value:function(t){t&&"function"==typeof t&&t.call(t,this)}},{key:"componentWillUpdate",value:function(t){t&&"function"==typeof t&&t.call(t,this)}},{key:"componentDidUpdate",value:function(t){t&&"function"==typeof t&&t.call(t,this)}},{key:"componentWillUnmount",value:function(t){t&&"function"==typeof t&&t.call(t,this)}},{key:"render",value:function(t){return t}},{key:"setState",value:function(t){if("function"==typeof t){var e=t.call(this,this.state);e&&(this.state=e)}else if(s(this.state)&&s(t)){var n=this.state;this.state=l(n,t)}else this.state=t}},{key:"update",value:function(t){if(this.render&&(this.componentShouldUpdate||!this.mounted)){var e=this.state;!0!==t&&t&&(e=t),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var n=this.render(e),o=void 0;n&&n.props&&n.props.id&&this.container&&(o=this.container&&this.container.querySelector("#"+n.props.id)),o&&!this.mounted&&o.parentNode.removeChild(o);var i=this.element&&this.element.vnode;if(r=i,l=e,!(u=this)||JSON.stringify(r)!==JSON.stringify(u.render(l))){var r,l,u;if(this.element=h(this.render(e),this.element),!this.mounted)return this.componentWillMount&&this.componentWillMount(),this.container&&1===this.container.nodeType||console.error("The container for a class component is not a valid DOM node. Check the selector provided for the class to make sure it is a valid CSS selector and that the container exists in the DOM. You might be targeting a nonexistent node."),this.container.appendChild(this.element),this.mounted=!0,void(this.componentDidMount&&this.componentDidMount());this.componentWillUpdate&&this.componentWillUpdate(),this.componentDidUpdate&&this.componentDidUpdate()}}}},{key:"unmount",value:function(){if(this.element){this.componentWillUnmount&&this.componentWillUnmount(),this.container.removeChild(this.element),this.container=null;for(var t in this)delete this[t];delete this.state,this.update=null,this.unmount=null}}},{key:"state",get:function(){return this[m]},set:function(t){var e=this;this[m]=t,u(function(){return e.update()})}}]),t}();t.h=function(t,e){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var r=[],l=[],u=o.length,s=(e=e||{}).key||null;for(delete e.key;u-- >0;)r.push(o[u]);for(;r.length;){var a=r.pop();if(a&&a.pop)for(u=a.length;u--;)r.push(a[u]);else null!=a&&!0!==a&&!1!==a&&l.push(a)}return o=l,"function"==typeof t?t(e||{},l):{type:t,props:e,children:o,key:s}},t.mount=function(t,e,o){if("string"==typeof e&&(e=document.querySelector(e)),e||(e=document.body),Array.isArray(t))throw new function t(){n(this,t),this.message="Cannot insert Fragment tag directly into DOM.",this.toString=function(){return this.message}};var i=h(t);return t.props&&t.props.onComponentDidMount&&t.props.onComponentDidMount.call(t.props.onComponentDidMount,i),i.mounted=!0,o?("string"==typeof o&&(o=document.querySelector(o)),o.parentNode.appendChild(i),o.parentNode.removeChild(o),i):e.appendChild(i)},t.render=function(t,e){return h(t,e)},t.Component=v,t.Fragment=function(t,e){return e},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=composi.js.map
